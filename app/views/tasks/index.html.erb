<h1><%= t('tasks.index') %></h1>
<p><%= notice %></p>
<%= form_with url: tasks_path, scope: :task, method: :get, local: true do |form| %>
  <div>
    <%= form.text_field :title %>
    <%= form.select :status, Task.statuses.keys.to_a, { include_blank: "選択する" } %>
  </div>

  <%= form.submit "検索" %>
<% end %>
<%= link_to t('tasks.sort_expired'), tasks_path(sort_expired: "true") %>
<%= link_to t('tasks.sort_priority'), tasks_path(sort_priority: "true") %>
<table>
  <tr>
    <th><%= t('tasks.title') %></th>
    <th><%= t('tasks.content') %></th>
    <th><%= t('tasks.expired_at') %></th>
    <th><%= t('tasks.status') %></th>
    <th><%= t('tasks.priority') %></th>
  </tr>

<% @tasks.each do |task| %>
  
  <tr class="task_row">
    <td><%= task.title %></td>
    <td><%= task.content %></td>
    <td><%= task.expired_at.strftime('%Y/%m/%d') %></td>
    <td><%= task.status %></td>
    <td><%= task.priority %></td>
    <td><%= link_to t('tasks.show'), task_path(task.id) %></td>
    <td><%= link_to t('tasks.edit'), edit_task_path(task.id) %></td>
    <td><%= link_to t('tasks.destroy'), task_path(task.id), method: :delete %></td>
  </tr>
<% end %>
</table>

<%= link_to t('tasks.new'), new_task_path %>